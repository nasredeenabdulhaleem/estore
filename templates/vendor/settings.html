{% extends 'vendor/base.html' %}
{% load static %}
{% block description %}

{% endblock description %}

{% block title %} Vendor Settings {% endblock title %}

{% block content %}

<div class="container mx-auto mt-8">
      
    <div class="max-w-lg mx-auto bg-base-200 p-6 rounded-md shadow-md">
        <h1 class="text-2xl font-bold mb-4">Vendor Settings</h1>
        <!-- Vendor Profile -->
        <div class="mb-4">
            <a href="{% url 'store:update_vendor_profile' business_name %}" class="flex items-center justify-between p-4 bg-base-100 rounded-md transition duration-300 hover:bg-base-300">
                <span class="text-lg font-medium">Vendor Profile</span>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M9 5l7 7-7 7" />
                </svg>
            </a>
        </div>

        <!-- Vendor Store -->
        <div class="mb-4">
            <a href="{% url 'store:update_vendor_store' business_name %}" class="flex items-center justify-between p-4 bg-base-100 rounded-md transition duration-300 hover:bg-base-300">
                <span class="text-lg font-medium">Vendor Store</span>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M9 5l7 7-7 7" />
                </svg>
            </a>
        </div>

        <!-- Update Password Page -->
        <div class="mb-4">
            <a href="{% url 'update_password' %}" class="flex items-center justify-between p-4 bg-base-100 rounded-md transition duration-300 hover:bg-base-300">
                <span class="text-lg font-medium">Update Password Page</span>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M9 5l7 7-7 7" />
                </svg>
            </a>
        </div>

        <!-- Password Reset Page -->
        <div class="mb-4">
            <a href="#" class="flex items-center justify-between p-4 bg-base-100 rounded-md transition duration-300 hover:bg-base-300">
                <span class="text-lg font-medium">Password Reset</span>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M9 5l7 7-7 7" />
                </svg>
            </a>
        </div>

        <!-- Deactivate Account Page -->
        <div class="mb-4">
            <a href="#" class="flex items-center justify-between p-4 bg-base-100 rounded-md transition duration-300 hover:bg-base-300">
                <span class="text-lg font-medium">Deactivate Account</span>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M9 5l7 7-7 7" />
                </svg>
            </a>
        </div>

        <!-- Contact Support Page -->
        <div class="mb-4">
            <a href="#" class="flex items-center justify-between p-4 bg-base-100 rounded-md transition duration-300 hover:bg-base-300">
                <span class="text-lg font-medium">Contact Support</span>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M9 5l7 7-7 7" />
                </svg>
            </a>
        </div>

    </div>
</div>
{% endblock content %}

{% block script %}
<script>
    // Get the password fields, the submit button, and the error message elements
    var newPassword = document.getElementById('new-password');
    var confirmPassword = document.getElementById('confirm-password');
    var submitBtn = document.getElementById('submit-btn');
    var newPasswordError = document.getElementById('new-password-error');
    var confirmPasswordError = document.getElementById('confirm-password-error');

    // Function to validate password
    function validatePassword() {
        // Check if the password meets the standard requirements
        console.log('Checking password Validity');
        var passwordRegex = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}$/;
        if (!passwordRegex.test(newPassword.value)) {
            newPasswordError.innerHTML = 'Password must contain at least one number, one lowercase and one uppercase letter, and be at least 8 characters long.';
            submitBtn.disabled = true;
        } else {
            newPasswordError.innerHTML = '';
        }

        // Check if the passwords match
        if (newPassword.value !== confirmPassword.value) {
            confirmPasswordError.textContent = 'Passwords do not match.';
            submitBtn.disabled = true;
        } else {
            confirmPasswordError.textContent = '';
        }

        // If validation passes, enable the submit button
        if (passwordRegex.test(newPassword.value) && newPassword.value === confirmPassword.value) {
            submitBtn.disabled = false;
        }
    }

    // Add input event listeners to the password fields
    newPassword.addEventListener("keyup", validatePassword);
    confirmPassword.addEventListener( "keyup", validatePassword);

    // Disable the submit button initially
    submitBtn.disabled = true;
</script>
{% endblock script %}
